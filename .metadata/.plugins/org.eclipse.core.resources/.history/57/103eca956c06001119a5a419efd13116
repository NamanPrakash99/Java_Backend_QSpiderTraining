package com.practice;

import javax.persistence.*;
import java.util.List;

public class ProductDao {

    public static void main(String[] args) {

    	 EntityManagerFactory emf = Persistence.createEntityManagerFactory("postgres");

    	    // INSERT
    	    public void insert(Product p){
    	        EntityManager em = emf.createEntityManager();
    	        EntityTransaction et = em.getTransaction();

    	        et.begin();
    	        em.persist(p);
    	        et.commit();

    	        em.close();
    	    }

    	    // UPDATE
    	    public void update(Product p){
    	        EntityManager em = emf.createEntityManager();
    	        EntityTransaction et = em.getTransaction();

    	        et.begin();
    	        em.merge(p);
    	        et.commit();

    	        em.close();
    	    }

    	    // FIND
    	    public Product find(int id){
    	        EntityManager em = emf.createEntityManager();
    	        return em.find(Product.class, id);
    	    }

    	    // DELETE
    	    public void delete(int id){
    	        EntityManager em = emf.createEntityManager();
    	        EntityTransaction et = em.getTransaction();

    	        Product p = em.find(Product.class, id);

    	        et.begin();
    	        em.remove(p);
    	        et.commit();

    	        em.close();
    	    }
}
